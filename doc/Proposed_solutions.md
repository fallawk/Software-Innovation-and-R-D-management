# 问题域分析
排除常规的业务建模，其核心的难点问题分为两部分：窗口排队人数获取，排队持续时间估算。

以下对此二部分问题分别建模。
## 窗口排队人数获取
### 传感器
最直接的方案为在每个窗口排队入口处，增设感应设备，每当有人进入队列时，向中心服务器发送信息。

此方法的优势是软件方面相对**简单**。相当于直接获取到了排队人数信息。

弊端如下：
1. 若使用透明式的传感器，则对其准确性要求及成本较高。若使用需要“人为反馈”传感器，比如刷卡器，则会人为增加排队的时间。前者相当于高速上的ETC通道，后者相当于人工通道。
2. 无法进行有效的校准，若某人进入了某窗口队列后离开队列。传感器无法获取对应的信息。
3. 无法应用于窗口密集型场景下。

### 基于图像处理的目标检测
相当于在各窗口增加了一双眼睛。定时进行检测。

此方法的优点在于可以**克服传感器方案的大部分弊端**。

弊端如下：
1. 成本较高。至少要求对所有窗口进行摄像头覆盖。中心服务器可能需要同时进行大量的目标检测，需要非常豪华的GPU配置。
2. 软件工艺要求非常高。目标检测是非常具有挑战性的任务，无论是传统的信号处理模式或者是时下流行的基于深度学习的图像处理，均无法保证100%的检出率。相比之下，深度学习的方法具有更好的泛化性，而相应的计算资源的消耗也非常高。

## 排队持续时间估计
### 基于传感器的方案
此方法假设窗口排队人数基于前述的传感器方案。

其优势仍是**非常直接，非常简单的软件要求**。

假设传感器获得的排队人数是可靠的，由于前后顾客完成购买离开窗口的时间间隔可以通过刷卡器测量，可以很简单的得到队伍被“消化”完的时间。

弊端则是前述的假设并不可靠。

### 基于图像目标检测
此方法假设窗口排队人数基于前述的目标检测方案。

其优势是基于目标检测的人数获取相对可靠。

队伍“前进”的速度可以用两种方式来测量：
1. 如前述刷卡器测量两次刷卡的时间间隔。
2. 直接在目标检测的基础上，扩展为追踪(tracking by detection paradigm)。利用追踪目标移动的位移来测量队伍的速度。

